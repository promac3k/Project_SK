<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200">
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../css/blocos/bloco.css">
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/blocos/calendario_modal.css">
    <script src="../js/main.js"></script>
    <title>Bloco C</title>


</head>


<body>
    <main>
        <!-- Modal Editar Palavra-Passe -->
        <div id="modal_sala" class="modal">

            <div class="modal_sala_content">
                <div class="modal-header">
                    <span class="fechar_editar">&times;</span>
                </div>
                <h1>Horário</h1>

                <div id="horario">
                    <div style="display: flex; justify-content: center; align-items: center;">
                        <button class="icon-button" onclick="prevMonth()"><span class="material-symbols-outlined">
                                arrow_back_ios
                            </span></button>
                        <div id="monthLabel" class="month-label"></div>
                        <button class="icon-button" onclick="nextMonth()"><span class="material-symbols-outlined">
                                arrow_forward_ios
                            </span></button>

                    </div>

                    <div id="calendar" class="calendar">
                    </div>

                </div>

                <form method="post">
                    <table class="table_alunos" id="horario_sala">
                        <tr class="tr_alunos">
                            <th>Horas</th>
                            <th>Segunda</th>
                            <th>Terça</th>
                            <th>Quarta</th>
                            <th>Quinta</th>
                            <th>Sexta</th>
                        </tr>

                        <tr class="tr_alunos">
                            <td>08:00 - 08:30</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>08:30 - 09:00</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr class="tr_alunos">
                            <td>09:00 - 09:30</td>
                            <td rowspan="8" class="table_aula_segunda">CIC (Teorica)<br>1ºPWDAM-01<br>F315----LT</td>
                            <td rowspan="8" class="table_aula_terca">IPINT (TP)<br>1ºPWDAM-01<br>D108-----JVJ</td>
                            <td rowspan="8" class="table_aula_quarta">FM (TP)<br>1ºPWDAM-01<br>F315-----ECSL</td>
                            <td rowspan="8" class="table_aula_quinta">ING (TP)<br>1ºPWDAM-01<br>F315-----ECSL</td>
                            <td rowspan="8" class="table_aula_sexta">SGBD (TP)<br>1ºPWDAM-01<br>F315-----ND_DSI_INF_01
                            </td>
                        </tr>
                        <tr class="tr_alunos">
                            <td>09:30 - 10:00</td>
                        </tr>
                        <tr class="tr_alunos">
                            <td>10:00 - 10:30</td>
                        </tr>
                        <tr class="tr_alunos">
                            <td>10:30 - 11:00</td>
                        </tr>
                        <tr class="tr_alunos">
                            <td>11:00 - 11:30</td>
                        </tr>
                        <tr class="tr_alunos">
                            <td>11:30 - 12:00</td>
                        </tr>
                        <tr class="tr_alunos">
                            <td>12:00 - 12:30</td>
                        </tr>
                        <tr class="tr_alunos">
                            <td>12:30 - 13:00</td>
                        </tr>
                        <tr class="tr_alunos">
                            <td>13:00 - 13:30</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>

                        <tr class="tr_alunos">
                            <td>13:30 - 14:00</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                    </table>
                    <button class="gravar" id="gravar">Gravar</button>
                </form>
            </div>
        </div>

        <div class="container">
            <nav>
                <ul>
                    <li style="margin-left: 1.3rem; margin-right: auto;"><a href="/">Inicio</a></li>
                    <li>
                        <div class="social-container">
                            <label class="switch">
                                <input id="switchon" type="checkbox" onclick="mySwitch()">
                                <span class="slider round"></span>
                            </label>
                        </div>
                    </li>
                    <li><a href="/contact">Contacto</a></li>
                    <li><a href="/eventos">Eventos</a></li>
                    <li class="adada"><a href="/perfil">Perfil</a></li>
                </ul>
            </nav>


            <a href="/"> <button class="button_back"> Voltar </button> </a>

            <h1>Bloco C</h1><br>
            <div class="cal">
                <table id="floorTable">
                    <thead>
                        <tr>
                            <th>Pisos</th>
                            <!-- Add a colspan attribute to the header cell for rooms -->
                            <th colspan="100">Salas</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>

                        </tr>
                        <tr>
                            <td>2</td>
                            <td id="floor2_room213" onmousemove="highlightCell(this)" onmouseout="resetCell(this)" onclick="document.getElementById('modal_sala').style.display='block'">A213</td>
                            <td id="floor2_room220" onmousemove="highlightCell(this)" onmouseout="resetCell(this)" onclick="document.getElementById('modal_sala').style.display='block'">A220</td>
                            <td id="floor2_room231" onmousemove="highlightCell(this)" onmouseout="resetCell(this)" onclick="document.getElementById('modal_sala').style.display='block'">A231</td>
                            <td id="floor2_room242" onmousemove="highlightCell(this)" onmouseout="resetCell(this)" onclick="document.getElementById('modal_sala').style.display='block'">A242</td>
                            <td id="floor2_room259" onmousemove="highlightCell(this)" onmouseout="resetCell(this)" onclick="document.getElementById('modal_sala').style.display='block'">A259</td>
                            <td id=" floor2_room260 " onmousemove="highlightCell(this) " onmouseout="resetCell(this) " onclick="document.getElementById('modal_sala').style.display='block'">A260</td>
                            <td id="floor2_room261 " onmousemove="highlightCell(this) " onmouseout="resetCell(this) " onclick="document.getElementById('modal_sala').style.display='block'">A261</td>
                            <td id=" floor2_room262 " onmousemove="highlightCell(this) " onmouseout="resetCell(this) " onclick="document.getElementById('modal_sala').style.display='block'">A262</td>
                        </tr>
                        <tr>
                            <td>3</td>

                    </tbody>
                </table>

            </div><br><br>

            <footer>
                <p>
                    Criado <i class="fa fa-heart "></i> por André Nunes, Diogo Oliveira, Gustavo Antunes, Sebastião Costa e Tiago Batista
                </p>
            </footer>
        </div>

    </main>
</body>

<script>
    window.onload = checkCookie();


    // JavaScript functions for events
    function highlightCell(cell) {
        cell.style.backgroundColor = "red ";
    }

    function resetCell(cell) {
        cell.style.backgroundColor = " ";
    }

    function showAlert(cell) {
        alert(cell.id);
        model_sala.style.display = "none ";
    }

    let year = 2023;
    let month = 11;
    let horario = document.getElementById('horario');
    let modal = document.getElementById('modal_sala');
    let horario_sala = document.getElementById('horario_sala');
    let gravar = document.getElementById('gravar');

    // vai buscar a class do botao para fechar o modal
    var span = document.getElementsByClassName("fechar_editar ")[0];

    //fecha o modal quando o botao dentro do modal for clicado
    span.onclick = function() {
        modal.style.display = "none ";
        horario_sala.style.display = 'none';
        gravar.style.display = 'none';
        horario.style.display = "grid ";
    }

    function generateCalendarModal() {
        const today = new Date();
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        const firstDay = new Date(year, month, 1).getDay();
        const calendarContainer = document.getElementById('calendar');
        calendarContainer.innerHTML = '';

        // Add days of the week
        const daysOfWeek = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb'];
        daysOfWeek.forEach(day => {
            const dayElement = document.createElement('div');
            dayElement.classList.add('week');
            dayElement.textContent = day;
            calendarContainer.appendChild(dayElement);
        });

        // Add empty cells for days before the first day of the month
        for (let i = 0; i < firstDay; i++) {
            const emptyCell = document.createElement('div');
            emptyCell.classList.add('day');
            emptyCell.textContent = '';
            calendarContainer.appendChild(emptyCell);
        }

        // Add days of the month with distinctive IDs and click event listener
        for (let day = 1; day <= daysInMonth; day++) {
            const dayElement = document.createElement('div');
            dayElement.classList.add('day');
            dayElement.textContent = day;
            dayElement.id = `day-${year}-${month + 1}-${day}`;

            dayElement.addEventListener('click', () => {
                horario.style.display = "none ";
                horario_sala.style.display = 'block';
            });

            calendarContainer.appendChild(dayElement);
        }

        // Add empty cells for days after the last day of the month
        const lastDay = new Date(year, month, daysInMonth).getDay();
        const remainingEmptyCells = 7 - ((firstDay + daysInMonth) % 7);

        for (let i = 0; i < remainingEmptyCells; i++) {
            const emptyCell = document.createElement('div');
            emptyCell.classList.add('empty-day');
            emptyCell.textContent = '1';
            calendarContainer.appendChild(emptyCell);
        }

        // Update the month label
        const monthLabel = document.getElementById('monthLabel');
        const monthNames = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
        monthLabel.textContent = `${monthNames[month]} ${year}`;
    }

    function nextMonth() {
        month++;
        if (month > 11) {
            month = 0;
            year++;
        }
        generateCalendarModal(year, month);
    }

    function prevMonth() {
        month--;
        if (month < 0) {
            month = 11;
            year--;
        }
        generateCalendarModal(year, month);
    }

    generateCalendarModal(year, month);
</script>

</html>